{"version":3,"sources":["js/form.js"],"names":["document","addEventListener","form","querySelector","formAddError","input","parentElement","classList","add","formRemoveError","remove","emailTest","test","value","formSend","event","preventDefault","error","formValidate","formReq","querySelectorAll","i","length","contains","getAttribute","checked","formData","FormData","response","fetch","method","body","ok","result","json","alert","message","console","log","reset"],"mappings":";AAAAA,SAASC,iBAAiB,mBAAoB,WACtCC,MAAAA,EAAOF,SAASG,cAAc,SA2D3BC,SAAAA,EAAaC,GACpBA,EAAMC,cAAcC,UAAUC,IAAI,UAClCH,EAAME,UAAUC,IAAI,UAGbC,SAAAA,EAAgBJ,GACvBA,EAAMC,cAAcC,UAAUG,OAAO,UACrCL,EAAME,UAAUG,OAAO,UAGhBC,SAAAA,EAAUN,GACV,OAAC,gDAAgDO,KAAKP,EAAMQ,OArErEX,EAAKD,iBAAiB,SAEPa,eAASC,GACtBA,EAAMC,iBAEAC,MAAAA,EAwBCC,SAAahB,GAChBe,IAAAA,EAAQ,EACNE,MAAAA,EAAUnB,SAASoB,iBAAiB,SAErC,IAAA,IAAIC,EAAI,EAAGA,EAAIF,EAAQG,OAAQD,GAAK,EAAG,CACpChB,MAAAA,EAAQc,EAAQE,GACtBZ,EAAgBJ,GAEZA,EAAME,UAAUgB,SAAS,UACvBZ,EAAUN,KACZD,EAAaC,GACbY,GAAS,GAGoB,aAA/BZ,EAAMmB,aAAa,UACD,IAAlBnB,EAAMoB,SAENrB,EAAaC,GACbY,GAAS,GAEW,KAAhBZ,EAAMQ,QACRT,EAAaC,GACbY,GAAS,GAIRA,OAAAA,EAlDOC,GAERQ,EAAW,IAAIC,SAASzB,GAE1Be,GAAU,IAAVA,EAAa,CACff,EAAKK,UAAUC,IAAI,YACboB,MAAAA,QAAiBC,MAAM,eAAgB,CAC3CC,OAAQ,OACRC,KAAML,IAGJE,GAAAA,EAASI,GAAI,CACTC,MAAAA,QAAeL,EAASM,KAC9BC,MAAMF,EAAOG,SACbC,QAAQC,IAAIL,GACZ/B,EAAKqC,aAELJ,MAAM,eAGRA,MAAM","file":"form.72aa57bb.js","sourceRoot":"../src","sourcesContent":["document.addEventListener('DOMContentLoaded', function () {\n  const form = document.querySelector('.form');\n  form.addEventListener('submit', formSend);\n\n  async function formSend(event) {\n    event.preventDefault();\n\n    const error = formValidate(form);\n\n    const formData = new FormData(form);\n\n    if (error === 0) {\n      form.classList.add('_sending');\n      const response = await fetch('sendmail.php', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (response.ok) {\n        const result = await response.json;\n        alert(result.message);\n        console.log(result);\n        form.reset();\n      } else {\n        alert('ошибка');\n      }\n    } else {\n      alert('Заполните обязательные поля');\n    }\n  }\n\n  function formValidate(form) {\n    let error = 0;\n    const formReq = document.querySelectorAll('._req');\n\n    for (let i = 0; i < formReq.length; i += 1) {\n      const input = formReq[i];\n      formRemoveError(input);\n\n      if (input.classList.contains('_email')) {\n        if (emailTest(input)) {\n          formAddError(input);\n          error += 1;\n        }\n      } else if (\n        input.getAttribute('type') === 'checkbox' &&\n        input.checked === false\n      ) {\n        formAddError(input);\n        error += 1;\n      } else {\n        if (input.value === '') {\n          formAddError(input);\n          error += 1;\n        }\n      }\n    }\n    return error;\n  }\n\n  function formAddError(input) {\n    input.parentElement.classList.add('_error');\n    input.classList.add('_error');\n  }\n\n  function formRemoveError(input) {\n    input.parentElement.classList.remove('_error');\n    input.classList.remove('_error');\n  }\n\n  function emailTest(input) {\n    return !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value);\n  }\n});\n"]}